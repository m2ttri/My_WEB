{% extends 'base.html' %}
{% load thumbnail %}
{% load humanize %}
{% load static %}

{% block title %}
	Actions
{% endblock %}


{% block content %}

    <div class="container py-2">

        {% for action in actions %}

            {% if action.target is not None %}

                <div class="container">
                    <div class="row d-flex justify-content-center">
                        <div class="col-md-12 col-lg-10 col-xl-6">
                            <div class="card mb-2">
                                <div class="card-body">
                                    <div class="d-flex flex-start align-items-center">

                                        {% with user=action.user profile=action.user.profile %}

                                            {% if user.profile.photo %}
                                                {% thumbnail user.profile.photo "80x80" crop="100%" as im %}
                                                    <a href="{% url 'user_detail' user %}">
                                                        <img class="item-img rounded-circle shadow-1-strong me-3"
                                                             src="{{ im.url }}" alt=""/>
                                                    </a>
                                            {% else %}
                                                <a href="{% url 'user_detail' user %}">
                                                    <img class="item-img rounded-circle shadow-1-strong me-3"
                                                         src="{% static 'images/no_image.jpg' %}" alt="" width="80"
                                                         height="80"/>
                                                </a>
                                            {% endif %}

                                            <div class="w-100">
                                                <p class="fw-bold mb-1">
                                                    <a href="{% url 'user_detail' user %}"
                                                       style="text-decoration: none; color: #ffda6a">{{ user }}</a>
                                                </p>

                                                <span class="mb-0">{{ action.verb }}</span>

                                                {% with target=action.target %}
                                                    <a href="{% url 'album:album_detail' target.id %}"
                                                       style="text-decoration: none">{{ target }}</a>
                                                {% endwith %}
                                            </div>

                                            <small class="text-secondary mb-0">{{ action.created|naturalday }}</small>

                                        {% endwith %}

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            {% endif %}

        {% endfor %}

    </div>

{% endblock %}